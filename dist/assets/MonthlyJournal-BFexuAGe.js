import{j as e,m as t,A as q}from"./ui-CeF3mqTb.js";import{r as l}from"./router-x15TIwzH.js";import{C as i}from"./Card-BuWKqhYc.js";import{B as h}from"./index-DCndX48W.js";import{m as J,n as U,o as K,p as Q,u as V,q as X,k as Y}from"./diaryStorage-D7FW-Xfd.js";import{u as Z,j as w,v as _,$ as k,b as ee,a5 as se,q as ae,d as te,h as re,a8 as ne,a4 as ie,T as le,i as oe,N as de,t as ce,a6 as he,C as xe}from"./icons-Dv2osvF6.js";import{s as v,e as me,f as x}from"./utils-D8kRLn_f.js";import"./vendor-Csw2ODfV.js";const Ne=()=>{const[n,m]=l.useState(null),[M,y]=l.useState(!1),[g,j]=l.useState(!1),[c,A]=l.useState(new Date),[C,L]=l.useState([]),[F,z]=l.useState(new Set),[I,f]=l.useState(!1),[p,b]=l.useState(null),[r,N]=l.useState({accomplishments:"",lessonsLearned:"",personalChanges:"",habitsEvolved:"",relationshipEvolution:"",nextMonthGoals:"",proudestMoments:"",focusAreas:"",additionalInsights:""}),u=v(c);me(c),l.useEffect(()=>{P(),E()},[c]);const P=()=>{const s=J("monthly",c);s?(m(s),N({accomplishments:s.accomplishments||"",lessonsLearned:s.lessonsLearned||"",personalChanges:s.personalChanges||"",habitsEvolved:s.habitsEvolved||"",relationshipEvolution:s.relationshipEvolution||"",nextMonthGoals:s.nextMonthGoals||"",proudestMoments:s.proudestMoments||"",focusAreas:s.focusAreas||"",additionalInsights:s.additionalInsights||""}),y(!1)):(m(null),N({accomplishments:"",lessonsLearned:"",personalChanges:"",habitsEvolved:"",relationshipEvolution:"",nextMonthGoals:"",proudestMoments:"",focusAreas:"",additionalInsights:""}),y(!0))},E=()=>{const s=U("monthly",c,10);L(s)},D=s=>{const a=Q(c,"monthly",s);A(a)},$=async()=>{j(!0);try{const s={...r,content:T(r),date:c.toISOString()};if(n){const a=V(n.id,"monthly",s);m(a)}else{const a=X("monthly",s);m(a)}y(!1),E()}catch(s){console.error("Error saving entry:",s)}finally{j(!1)}},G=async()=>{const s=p||n;if(s){j(!0);try{Y(s.id,"monthly"),(!p||p.id===n?.id)&&(m(null),y(!0),N({accomplishments:"",lessonsLearned:"",personalChanges:"",habitsEvolved:"",relationshipEvolution:"",nextMonthGoals:"",proudestMoments:"",focusAreas:"",additionalInsights:""})),f(!1),b(null),E()}catch(a){console.error("Error deleting entry:",a)}finally{j(!1)}}},T=s=>`
Monthly Reflection - ${x(u,"MMMM yyyy")}

🏆 Biggest Accomplishments: ${s.accomplishments}

📚 Lessons Learned: ${s.lessonsLearned}

🔄 Personal Changes: ${s.personalChanges}

🎯 Habits Evolution: ${s.habitsEvolved}

❤️ Relationship Evolution: ${s.relationshipEvolution}

🚀 Next Month Goals: ${s.nextMonthGoals}

⭐ Proudest Moments: ${s.proudestMoments}

🎯 Focus Areas for Improvement: ${s.focusAreas}

💭 Additional Insights: ${s.additionalInsights}
    `.trim(),o=(s,a)=>{N(d=>({...d,[s]:a}))},R=()=>r.accomplishments&&r.lessonsLearned&&r.personalChanges,H=s=>{z(a=>{const d=new Set(a);return d.has(s)?d.delete(s):d.add(s),d})},W=()=>{const a=v(new Date);return u.toDateString()===a.toDateString()},B=()=>{const a=v(new Date);return u>a};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-teal-500/5 to-cyan-500/5 rounded-2xl sm:rounded-3xl blur-xl"}),e.jsxs(i,{variant:"glass",className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(h,{variant:"secondary",size:"sm",onClick:()=>D("prev"),className:"flex items-center space-x-2",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-gradient flex items-center justify-center gap-2 bg-gradient-to-r from-teal-600 to-cyan-600 dark:from-teal-400 dark:to-cyan-400 bg-clip-text text-transparent",children:[e.jsx(w,{className:"h-6 w-6 text-teal-500"}),"Monthly Journal"]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600 dark:text-gray-400 mt-1",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:x(u,"MMMM yyyy")}),W()&&e.jsx("span",{className:"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 px-2 py-1 rounded-full text-xs font-medium",children:"This Month"})]})]}),e.jsxs(h,{variant:"secondary",size:"sm",onClick:()=>D("next"),className:"flex items-center space-x-2",disabled:B(),children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx(_,{className:"h-4 w-4"})]})]}),e.jsx("div",{className:"flex justify-center space-x-3 mt-4",children:!M&&n&&e.jsxs(e.Fragment,{children:[e.jsxs(h,{variant:"secondary",onClick:()=>y(!0),children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Edit Entry"]}),e.jsxs(h,{variant:"danger",onClick:()=>{b(n),f(!0)},className:"bg-red-500 hover:bg-red-600 text-white",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Delete Entry"]})]})})]})]}),M?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{className:"h-5 w-5 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Biggest Accomplishments"})]}),e.jsx("textarea",{value:r.accomplishments,onChange:s=>o("accomplishments",s.target.value),placeholder:"What were your most significant achievements this month?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"h-5 w-5 text-orange-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Lessons Learned"})]}),e.jsx("textarea",{value:r.lessonsLearned,onChange:s=>o("lessonsLearned",s.target.value),placeholder:"What important lessons did you learn this month?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5 text-blue-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Personal Changes"})]}),e.jsx("textarea",{value:r.personalChanges,onChange:s=>o("personalChanges",s.target.value),placeholder:"How have you changed or evolved as a person this month?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"h-5 w-5 text-green-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Habits Evolution"})]}),e.jsx("textarea",{value:r.habitsEvolved,onChange:s=>o("habitsEvolved",s.target.value),placeholder:"What habits did you develop, improve, or break this month?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"h-5 w-5 text-pink-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Relationship Evolution"})]}),e.jsx("textarea",{value:r.relationshipEvolution,onChange:s=>o("relationshipEvolution",s.target.value),placeholder:"How have your relationships evolved this month?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"h-5 w-5 text-indigo-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Next Month Goals"})]}),e.jsx("textarea",{value:r.nextMonthGoals,onChange:s=>o("nextMonthGoals",s.target.value),placeholder:"What goals are you setting for next month?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{className:"h-5 w-5 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Proudest Moments"})]}),e.jsx("textarea",{value:r.proudestMoments,onChange:s=>o("proudestMoments",s.target.value),placeholder:"What moments from this month made you feel most proud?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"h-5 w-5 text-red-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Focus Areas for Improvement"})]}),e.jsx("textarea",{value:r.focusAreas,onChange:s=>o("focusAreas",s.target.value),placeholder:"What areas do you want to focus on improving next month?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})})]}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},children:e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"h-5 w-5 text-purple-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Additional Insights"})]}),e.jsx("textarea",{value:r.additionalInsights,onChange:s=>o("additionalInsights",s.target.value),placeholder:"Any other insights, thoughts, or reflections from this month...",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:5})]})})}),M&&e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"flex justify-center pt-6",children:e.jsxs(h,{variant:"primary",onClick:$,disabled:g||!R(),className:"px-8 py-3 text-lg",children:[e.jsx(de,{className:"h-5 w-5 mr-2"}),g?"Saving...":"Save Entry"]})})]}):n&&e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(i,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-gray-900 dark:text-gray-100 leading-relaxed",children:n.content})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"h-5 w-5 text-green-500"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Monthly reflection completed on ",x(new Date(n.createdAt),"MMM dd, yyyy")]})]}),n.updatedAt!==n.createdAt&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Last updated: ",x(new Date(n.updatedAt),"MMM dd, HH:mm")]})]})]})})}),C.length>0&&e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(i,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center space-x-2",children:[e.jsx(w,{className:"h-5 w-5 text-purple-500"}),e.jsx("span",{children:"Previous Monthly Reflections"})]}),e.jsx("div",{className:"space-y-3",children:C.map(s=>{const a=K(s),d=F.has(s.id),O=v(new Date(s.date));return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg group",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>H(s.id),className:"flex-1 p-4 text-left hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-lg",children:"📅"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:x(O,"MMMM yyyy")}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.preview})]})]}),d?e.jsx(he,{className:"h-5 w-5 text-gray-400"}):e.jsx(xe,{className:"h-5 w-5 text-gray-400"})]})}),e.jsx("button",{onClick:S=>{S.preventDefault(),S.stopPropagation(),b(s),f(!0)},className:"opacity-0 group-hover:opacity-100 transition-opacity p-2 mr-2 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/20 text-red-500 hover:text-red-600",title:"Delete entry",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx(q,{children:d&&e.jsx(t.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"p-4 prose dark:prose-invert prose-sm max-w-none",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-gray-900 dark:text-gray-100 leading-relaxed",children:s.content})})})})]},s.id)})})]})})}),I&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsx(t.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 mb-4",children:e.jsx(k,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Delete Monthly Entry"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete this monthly journal entry for ",p?x(v(new Date(p.date)),"MMMM yyyy"):x(u,"MMMM yyyy"),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(h,{variant:"secondary",onClick:()=>{f(!1),b(null)},className:"flex-1",disabled:g,children:"Cancel"}),e.jsx(h,{variant:"danger",onClick:G,className:"flex-1 bg-red-500 hover:bg-red-600 text-white",disabled:g,children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Delete Entry"]})})]})]})})})]})};export{Ne as default};
