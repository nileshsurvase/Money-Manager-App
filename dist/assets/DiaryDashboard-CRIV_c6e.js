import{j as e,m as y}from"./ui-CeF3mqTb.js";import{r as i,L as E}from"./router-x15TIwzH.js";import{C as v}from"./Card-BuWKqhYc.js";import{x as Q,y as T,z as Be,A as We,C as ze,D as U,E as Pe,F as Fe,G as qe,B as h,H as Le,I as Ve,J as Qe}from"./index-DbxcNNxi.js";import{B as I,s as Ue,r as Ye,Q as Xe,q as Ge,V as Ke,c as me,w as Ze,X as Y,W as et,Y as tt,Z as S,_ as at,$ as st,t as rt,u as lt,g as ge,a0 as ye,n as it,i as nt,a1 as dt}from"./icons-BP9Be9z0.js";import{f as x,g as ot,c as ct,b as xt,h as mt,s as he,d as gt,j as yt}from"./utils-BLxLozLB.js";import"./vendor-Csw2ODfV.js";const ue=()=>{try{console.log("ðŸ§¹ Starting data cleanup...");const o=["diary_daily_entries","diary_weekly_entries","diary_monthly_entries","diary_wellness_data","diary_habits","diary_habit_completions"];let c=0;return o.forEach(j=>{try{const m=localStorage.getItem(j);if(m){const H=JSON.parse(m);if(Array.isArray(H)){const M=H.filter(d=>d?d.date&&isNaN(new Date(d.date))?(console.log(`âŒ Removing entry with invalid date: ${d.date}`),c++,!1):d.createdAt&&isNaN(new Date(d.createdAt))?(console.log(`âŒ Removing entry with invalid createdAt: ${d.createdAt}`),c++,!1):d.updatedAt&&isNaN(new Date(d.updatedAt))?(console.log(`âŒ Removing entry with invalid updatedAt: ${d.updatedAt}`),c++,!1):!0:!1);localStorage.setItem(j,JSON.stringify(M)),console.log(`âœ… Cleaned ${j}: ${H.length} â†’ ${M.length} entries`)}}}catch(m){console.error(`Error cleaning ${j}:`,m),localStorage.removeItem(j),console.log(`ðŸ—‘ï¸ Removed corrupted ${j}`)}}),console.log(`âœ¨ Data cleanup complete! Removed ${c} corrupted entries.`),console.log("ðŸ”„ Please refresh the page to see the changes."),{success:!0,cleanedCount:c,message:"Data cleanup completed successfully"}}catch(o){return console.error("âŒ Data cleanup failed:",o),{success:!1,error:o.message}}},pe=()=>{try{const o=localStorage.getItem("diary_daily_entries");o&&JSON.parse(o).some(m=>m.date&&isNaN(new Date(m.date))||m.createdAt&&isNaN(new Date(m.createdAt)))&&(console.log("ðŸ”§ Detected corrupted diary data, running auto-cleanup..."),ue())}catch(o){console.error("Auto-cleanup failed:",o)}},ht=()=>{console.log("ðŸ”„ Performing complete diary data reset..."),["diary_daily_entries","diary_weekly_entries","diary_monthly_entries","diary_wellness_data","diary_habits","diary_habit_completions","sample_data_loaded"].forEach(c=>{localStorage.removeItem(c),console.log(`âœ… Removed: ${c}`)}),console.log("âœ¨ Complete reset done! Refreshing page..."),setTimeout(()=>window.location.reload(),500)};typeof window<"u"&&(window.cleanupDiaryData=ue,window.autoCleanupDiaryData=pe,window.resetAllDiaryData=ht);const Dt=()=>{const[o,c]=i.useState(()=>{try{return{daily:{current:0,longest:0},weekly:{current:0,longest:0},monthly:{current:0,longest:0}}}catch(t){return console.error("Error initializing streaks:",t),{daily:{current:0,longest:0},weekly:{current:0,longest:0},monthly:{current:0,longest:0}}}}),[j,m]=i.useState({daily:!1,weekly:!1,monthly:!1}),[H,M]=i.useState(null),[d,be]=i.useState([]),[X,G]=i.useState([]),[K,fe]=i.useState([]),[N,je]=i.useState(null),[Ne,ve]=i.useState(null),[ut,ke]=i.useState({current:0,longest:0}),[u,w]=i.useState([]),[we,R]=i.useState(!1),[$,Z]=i.useState(""),[n,ee]=i.useState(null),[C,J]=i.useState(new Date),[te,B]=i.useState(null),[W,_]=i.useState(""),[De,z]=i.useState(!1),[A,P]=i.useState(null),[Se,F]=i.useState(!1),[p,q]=i.useState(null);i.useEffect(()=>{try{ae()}catch(t){console.error("Error in loadDashboardData:",t)}},[]);const ae=()=>{console.log("Starting loadDashboardData...");try{console.log("Running auto cleanup..."),pe(),console.log("Auto cleanup completed")}catch(t){console.error("Auto-cleanup failed:",t)}try{console.log("Loading streaks...");const t=Q("daily");console.log("Daily streak loaded:",t);const s=Q("weekly");console.log("Weekly streak loaded:",s);const a=Q("monthly");console.log("Monthly streak loaded:",a),c({daily:t,weekly:s,monthly:a}),console.log("Streaks set successfully")}catch(t){console.error("Error loading streaks:",t),c({daily:{current:0,longest:0},weekly:{current:0,longest:0},monthly:{current:0,longest:0}})}m({daily:T("daily"),weekly:T("weekly"),monthly:T("monthly")}),fe(Be()),M(We()),be(ze());try{const s=[...U("daily").map(a=>({...a,type:"daily"})),...U("weekly").map(a=>({...a,type:"weekly"})),...U("monthly").map(a=>({...a,type:"monthly"}))].filter(a=>a.createdAt&&!isNaN(new Date(a.createdAt))).sort((a,r)=>new Date(r.createdAt)-new Date(a.createdAt)).slice(0,5);G(s)}catch(t){console.error("Error loading recent entries:",t),G([])}je(Pe()),ve(Fe(7)),ke(qe()),Ae()},L=t=>{switch(t){case"daily":return dt;case"weekly":return I;case"monthly":return nt;default:return I}},se=t=>{switch(t){case"daily":return"from-emerald-500 to-green-500";case"weekly":return"from-green-500 to-teal-500";case"monthly":return"from-teal-500 to-cyan-500";default:return"from-gray-500 to-gray-600"}},re=t=>{switch(t){case"daily":return"/diary/daily";case"weekly":return"/diary/weekly";case"monthly":return"/diary/monthly";default:return"/diary"}},Ce=t=>{try{const s=new Date,a=s.getDay(),r=s.getDate(),l=T(t);return t==="daily"?{completed:l,isDue:!0,isBlurred:!1}:t==="weekly"?{completed:l,isDue:a===0,isBlurred:a!==0&&!l}:t==="monthly"?{completed:l,isDue:r===1,isBlurred:r!==1&&!l}:{completed:!1,isDue:!1,isBlurred:!1}}catch(s){return console.error("Error in getJournalStatus:",s),{completed:!1,isDue:!1,isBlurred:!1}}},O=d.length===0?null:d.reduce((t,s)=>t.count>s.count?t:s),Ae=()=>{const t=JSON.parse(localStorage.getItem("diary_habits")||"[]");if(t.length===0){const s=[{id:1,name:"Wake up early",color:"blue",createdAt:new Date().toISOString()},{id:2,name:"Exercise",color:"green",createdAt:new Date().toISOString()},{id:3,name:"Read",color:"purple",createdAt:new Date().toISOString()}];w(s),localStorage.setItem("diary_habits",JSON.stringify(s))}else w(t)},le=()=>{if(!$.trim())return;const t=["blue","green","purple","pink","orange","teal"],s={id:Date.now(),name:$,color:t[u.length%t.length],createdAt:new Date().toISOString()},a=[...u,s];w(a),localStorage.setItem("diary_habits",JSON.stringify(a)),Z(""),R(!1)},Ee=t=>{B(t.id),_(t.name)},ie=()=>{if(!W.trim())return;const t=u.map(s=>s.id===te?{...s,name:W,updatedAt:new Date().toISOString()}:s);w(t),localStorage.setItem("diary_habits",JSON.stringify(t)),B(null),_("")},He=()=>{B(null),_("")},Me=t=>{P(t),z(!0)},_e=()=>{if(!A)return;const t=u.filter(a=>a.id!==A.id);w(t),localStorage.setItem("diary_habits",JSON.stringify(t));const s=JSON.parse(localStorage.getItem("diary_habit_completions")||"{}");Object.keys(s).forEach(a=>{const r=s[a].indexOf(A.id);r>-1&&s[a].splice(r,1)}),localStorage.setItem("diary_habit_completions",JSON.stringify(s)),z(!1),P(null)},Oe=(t,s)=>{const a=x(s,"yyyy-MM-dd"),r=JSON.parse(localStorage.getItem("diary_habit_completions")||"{}");r[a]||(r[a]=[]);const l=r[a].indexOf(t);l>-1?r[a].splice(l,1):r[a].push(t),localStorage.setItem("diary_habit_completions",JSON.stringify(r))},ne=(t,s)=>{const a=x(s,"yyyy-MM-dd"),l=JSON.parse(localStorage.getItem("diary_habit_completions")||"{}")[a];return Array.isArray(l)&&l.includes(t)||!1},de=t=>{const s=JSON.parse(localStorage.getItem("diary_habit_completions")||"{}"),a=new Date;let r=0,l=0,f=0;for(let g=0;g<365;g++){const xe=he(a,g),D=x(xe,"yyyy-MM-dd");Array.isArray(s[D])&&s[D].includes(t)?(g===r&&r++,f++):(f>l&&(l=f),f=0)}return l=Math.max(l,f),{current:r,best:l}},Te=t=>{const s=JSON.parse(localStorage.getItem("diary_habit_completions")||"{}"),a=[];return Object.keys(s).forEach(r=>{Array.isArray(s[r])&&s[r].includes(t)&&a.push(new Date(r))}),a.sort((r,l)=>l-r)},Ie=()=>{const t=[];for(let s=0;s<4;s++)t.push(he(new Date,s));return t},b=t=>{if(!u.find(k=>k.id===t))return{totalDays:0,completedDays:0,completionRate:0,firstCompletionDate:null};const a=JSON.parse(localStorage.getItem("diary_habit_completions")||"{}");let r=0,l=null,f=null;const g=[];if(Object.keys(a).forEach(k=>{if(Array.isArray(a[k])&&a[k].includes(t)){const V=new Date(k);g.push(V),r++}}),g.length===0)return{totalDays:0,completedDays:0,completionRate:0,firstCompletionDate:null};g.sort((k,V)=>k-V),l=g[0],f=g[g.length-1];const D=Math.floor((new Date-l)/(1e3*60*60*24))+1,Je=D>0?Math.round(r/D*100):0;return{totalDays:D,completedDays:r,completionRate:Je,firstCompletionDate:l,lastCompletionDate:f}},oe=Ie(),ce=t=>{J(t==="prev"?gt(C):yt(C,1))},Re=async()=>{if(p)try{await Qe(p.id,p.type),F(!1),q(null),ae()}catch(t){console.error("Error deleting entry:",t)}},$e=t=>{q(t),F(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/5 to-green-500/5 rounded-2xl sm:rounded-3xl blur-xl"}),e.jsx(v,{variant:"glass",className:"relative",children:e.jsxs("div",{className:"flex flex-col space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"space-y-2",children:e.jsxs("h1",{className:"text-gradient flex items-center gap-2 sm:gap-3 bg-gradient-to-r from-emerald-600 to-green-600 dark:from-emerald-400 dark:to-green-400 bg-clip-text text-transparent",children:[e.jsx(I,{className:"h-6 w-6 sm:h-8 sm:w-8 text-emerald-500 animate-pulse"}),"My Diary Dashboard"]})}),e.jsx("div",{className:"flex flex-wrap gap-3",children:Object.entries(j).map(([t,s])=>{const a=Ce(t);let r="",l=!0;return a.completed?r="bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":a.isDue?r="bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":a.isBlurred?(r="bg-gray-100 dark:bg-gray-800/30 text-gray-400 dark:text-gray-500 opacity-50",l=!1):r="bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",e.jsxs("div",{className:`flex items-center space-x-2 px-3 py-2 rounded-xl text-sm font-medium ${r} ${l?"cursor-pointer hover:opacity-80 transition-opacity":"cursor-not-allowed"}`,children:[a.completed?e.jsx(Ue,{className:"h-4 w-4"}):e.jsx(Ye,{className:"h-4 w-4"}),e.jsxs("span",{className:"capitalize",children:[t," Journal"]})]},t)})})]})})]}),K.length>0&&e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(v,{className:"border-red-200 dark:border-red-800 bg-red-50/50 dark:bg-red-900/10",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{className:"h-5 w-5 text-red-500 animate-pulse"}),e.jsx("h2",{className:"text-lg font-semibold text-red-600 dark:text-red-400",children:"Due Today"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:K.map(t=>{const s=L(t.type);return e.jsx(y.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx(E,{to:re(t.type),children:e.jsx("div",{className:"p-4 rounded-xl border-2 border-red-300 dark:border-red-700 bg-red-50 dark:bg-red-900/20 transition-all duration-200 hover:shadow-md",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-200 dark:bg-red-800",children:e.jsx(s,{className:"h-5 w-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.description}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx(Ge,{className:"h-3 w-3 text-red-500"}),e.jsx("span",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:"Due Today"})]})]})]})})})},t.type)})})]})})}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:["daily","weekly","monthly"].map((t,s)=>{const a=o[t],r=L(t),l=se(t);return e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+s*.1},children:e.jsx(v,{variant:"stat",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx("div",{className:`w-10 h-10 bg-gradient-to-br ${l} rounded-lg flex items-center justify-center shadow-lg`,children:e.jsx(r,{className:"h-5 w-5 text-white"})})}),e.jsxs("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 capitalize mb-1",children:[t," Streak"]}),e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[e.jsx(Ke,{className:"h-3 w-3 text-orange-500"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:a.current})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Best: ",a.longest]})]})})},t)})}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"-mb-4",children:e.jsx("div",{className:"relative perspective-1000",style:{minHeight:`${Math.max(400,u.length*60+200)}px`},children:e.jsxs(y.div,{className:`w-full h-full transition-transform duration-700 transform-style-preserve-3d ${n?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d"},children:[e.jsx("div",{className:"absolute inset-0 backface-hidden",children:e.jsx(v,{className:"habit-tracker-card",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(me,{className:"h-5 w-5 text-indigo-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Habit Tracker"})]}),e.jsx(h,{variant:"ghost",size:"small",onClick:()=>R(!0),className:"p-2",children:e.jsx(Ze,{className:"h-5 w-5 text-indigo-500"})})]}),we&&e.jsxs("div",{className:"flex space-x-2 mb-4",children:[e.jsx("input",{type:"text",value:$,onChange:t=>Z(t.target.value),placeholder:"Enter habit name...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",onKeyPress:t=>t.key==="Enter"&&le()}),e.jsx(h,{variant:"primary",size:"small",onClick:le,children:"Add"}),e.jsx(h,{variant:"ghost",size:"small",onClick:()=>R(!1),children:e.jsx(Y,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm font-medium text-gray-600 dark:text-gray-400 habit-grid-header mb-4",children:[e.jsx("div",{className:"text-left",children:"Habit"}),e.jsx("div",{className:"grid grid-cols-4 gap-1 text-center",children:oe.map((t,s)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:s===0?"text-blue-600 font-bold text-xs":"text-xs",children:s===0?"TODAY":x(t,"EEE").toUpperCase()}),e.jsx("div",{className:"text-xs",children:x(t,"d")})]},s))})]}),e.jsxs("div",{className:"flex-1 space-y-3",children:[u.map((t,s)=>e.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center group",children:[e.jsx("div",{className:"flex items-center space-x-2",children:te===t.id?e.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[e.jsx("input",{type:"text",value:W,onChange:a=>_(a.target.value),className:"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",onKeyPress:a=>a.key==="Enter"&&ie(),autoFocus:!0}),e.jsx("button",{onClick:ie,className:"p-1 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/20 text-green-600 hover:text-green-700",title:"Save changes",children:e.jsx(et,{className:"h-4 w-4"})}),e.jsx("button",{onClick:He,className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 hover:text-gray-600",title:"Cancel editing",children:e.jsx(Y,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:()=>{ee(t),J(new Date)},className:"flex-1 text-left hover:text-indigo-600 hover:underline transition-all duration-200 cursor-pointer font-medium text-gray-900 dark:text-gray-100 px-3 py-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20 text-sm leading-tight",title:t.name,children:t.name}),e.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),Ee(t)},className:"p-1 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/20 text-blue-500 hover:text-blue-600",title:"Edit habit",children:e.jsx(tt,{className:"h-3 w-3"})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),Me(t)},className:"p-1 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/20 text-red-500 hover:text-red-600",title:"Delete habit",children:e.jsx(S,{className:"h-3 w-3"})})]})]})}),e.jsx("div",{className:"grid grid-cols-4 gap-1 justify-items-center",children:oe.map((a,r)=>{const l=ne(t.id,a),f=r===0;return e.jsx("button",{onClick:()=>{Oe(t.id,a),w([...u])},className:`habit-day-button-tiny ${l?"habit-completed":"habit-incomplete"} ${f?"habit-today-ring":""}`,title:x(a,"MMM dd, yyyy"),children:l?e.jsx(at,{className:"h-2 w-2 text-white"}):e.jsx(Y,{className:"h-1.5 w-1.5"})},r)})})]},t.id)),u.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(me,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No habits yet. Click the + to add your first habit!"})]})]})]})})}),e.jsx("div",{className:"absolute inset-0 backface-hidden rotate-y-180",children:e.jsx(v,{className:"habit-tracker-card",children:e.jsxs("div",{className:"space-y-4 overflow-y-auto",style:{maxHeight:`${Math.max(400,u.length*60+200)}px`},children:[e.jsxs("div",{className:"flex items-center justify-between sticky top-0 bg-white dark:bg-gray-800 z-10 pb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:n?.name||"Habit Details"})]}),e.jsx(h,{variant:"ghost",size:"small",onClick:()=>ee(null),className:"p-2",children:e.jsx(st,{className:"h-5 w-5"})})]}),n&&e.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:de(n.id).current}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Current Streak"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:de(n.id).best}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Best Streak"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-3 rounded-lg border border-purple-200 dark:border-purple-700/30",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:b(n.id).completedDays}),e.jsx("div",{className:"text-xs text-purple-600/70 dark:text-purple-400/70 font-medium",children:"Total Days Done"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Since ",b(n.id).firstCompletionDate&&!isNaN(new Date(b(n.id).firstCompletionDate))?x(b(n.id).firstCompletionDate,"MMM dd, yyyy"):"No completions yet"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-100 dark:from-orange-900/20 dark:to-amber-800/20 p-3 rounded-lg border border-orange-200 dark:border-orange-700/30",children:[e.jsxs("div",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:[b(n.id).completionRate,"%"]}),e.jsx("div",{className:"text-xs text-orange-600/70 dark:text-orange-400/70 font-medium",children:"Success Rate"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[b(n.id).completedDays," of ",b(n.id).totalDays," days"]})]})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-3 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Total Progress"}),e.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:[b(n.id).completedDays," / ",b(n.id).totalDays," days"]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${b(n.id).completionRate}%`}})})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("button",{onClick:()=>ce("prev"),className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Previous month",children:e.jsx(rt,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:x(C,"MMMM yyyy")}),e.jsx("button",{onClick:()=>ce("next"),className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Next month",children:e.jsx(lt,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1 text-xs",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(t=>e.jsx("div",{className:"text-center font-medium text-gray-600 dark:text-gray-400 py-1",children:t},t)),ot({start:xt(C),end:ct(C)}).map((t,s)=>{const a=ne(n.id,t);return e.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center text-xs ${a?"bg-blue-500 text-white":"text-gray-600 dark:text-gray-400"} ${mt(t)?"ring-2 ring-blue-300":""}`,children:x(t,"d")},s)})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Recent Activity"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:Te(n.id).slice(0,10).map((t,s)=>e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:t&&!isNaN(new Date(t))?x(t,"MMM dd, yyyy"):"Invalid date"})]},s))})]})]})]})})})]})})}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"-mt-4",children:e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"h-5 w-5 text-pink-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Mood Tracker"})]}),O?e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"text-4xl",children:O.emotionData?.emoji}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:O.emotionData?.name}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Most frequent mood (",O.count," times)"]})]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ¤”"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Start journaling to track your moods"})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:Le.slice(0,10).map(t=>{const a=d.find(r=>r.emotion===t.name)?.count||0;return e.jsxs("div",{className:`p-2 rounded-lg text-center transition-all duration-200 ${a>0?"bg-gray-100 dark:bg-gray-800 scale-110":"bg-gray-50 dark:bg-gray-900 opacity-50"}`,children:[e.jsx("div",{className:"text-lg",children:t.emoji}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:a})]},t.name)})})]})})}),(N||Ne?.totalEntries>0)&&e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{className:"h-5 w-5 text-purple-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Wellness Tracking"})]}),e.jsx(E,{to:"/diary/daily",children:e.jsx(h,{variant:"secondary",size:"sm",children:N?"Update":"Check In"})})]}),N?e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 dark:from-purple-900/30 dark:to-indigo-900/30 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mb-1",children:[N.wellnessScore,"%"]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Wellness Score"}),e.jsx("div",{className:"text-lg mt-1",children:"ðŸ§ "})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/30 dark:to-emerald-900/30 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl mb-1",children:Ve(N.mood).icon}),e.jsxs("div",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:[N.mood,"/10"]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Mood"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-900/30 dark:to-red-900/30 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl mb-1",children:"ðŸ˜°"}),e.jsxs("div",{className:"text-lg font-semibold text-orange-600 dark:text-orange-400",children:[N.stress,"/10"]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Stress"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/30 dark:to-orange-900/30 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl mb-1",children:"âš¡"}),e.jsxs("div",{className:"text-lg font-semibold text-yellow-600 dark:text-yellow-400",children:[N.energy,"/10"]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Energy"})]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ye,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Track Your Daily Wellness"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Monitor your mood, stress, and energy levels"}),e.jsx(E,{to:"/diary/daily",children:e.jsxs(h,{variant:"primary",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),"Start Wellness Check-in"]})})]})]})})}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(it,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Recent Entries"})]}),e.jsx(E,{to:"/diary/recent-entries",children:e.jsx(h,{variant:"secondary",size:"sm",className:"text-emerald-600 hover:text-emerald-700",children:"View All"})})]}),e.jsx("div",{className:"space-y-3",children:X.length>0?X.map(t=>{const s=L(t.type);return e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors group",children:[e.jsx("div",{className:`w-8 h-8 bg-gradient-to-br ${se(t.type)} rounded-lg flex items-center justify-center flex-shrink-0`,children:e.jsx(s,{className:"h-4 w-4 text-white"})}),e.jsxs(E,{to:re(t.type),className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 capitalize",children:t.type}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.createdAt&&!isNaN(new Date(t.createdAt))?x(new Date(t.createdAt),"MMM dd"):"No date"})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:[t.content?.slice(0,100),"..."]})]}),e.jsx("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),$e(t)},className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/20 text-red-500 hover:text-red-600",title:"Delete entry",children:e.jsx(S,{className:"h-4 w-4"})})]},t.id)}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(I,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No entries yet. Start journaling!"})]})})]})})}),Se&&p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsx(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 mb-4",children:e.jsx(S,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:["Delete ",p.type.charAt(0).toUpperCase()+p.type.slice(1)," Entry"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete this ",p.type," journal entry from ",p.createdAt&&!isNaN(new Date(p.createdAt))?x(new Date(p.createdAt),"MMMM dd, yyyy"):"unknown date","? This action cannot be undone."]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(h,{variant:"secondary",onClick:()=>{F(!1),q(null)},className:"flex-1",children:"Cancel"}),e.jsxs(h,{variant:"danger",onClick:Re,className:"flex-1 bg-red-500 hover:bg-red-600 text-white",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Delete Entry"]})]})]})})}),De&&A&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsx(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 mb-4",children:e.jsx(S,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Delete Habit"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:['Are you sure you want to delete the habit "',A.name,'"? This will also remove all completion history for this habit. This action cannot be undone.']}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(h,{variant:"secondary",onClick:()=>{z(!1),P(null)},className:"flex-1",children:"Cancel"}),e.jsxs(h,{variant:"danger",onClick:_e,className:"flex-1 bg-red-500 hover:bg-red-600 text-white",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Delete Habit"]})]})]})})})]})};export{Dt as default};
