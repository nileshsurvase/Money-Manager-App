import{j as e,A as $,m as E}from"./ui-CeF3mqTb.js";import{r as l}from"./router-x15TIwzH.js";import{C as u}from"./Card-BuWKqhYc.js";import{ab as te,B as r}from"./index-DbxcNNxi.js";import{I as h}from"./Input-3yWY-vqC.js";import{S as w,M as O}from"./Select-BqqbDTNT.js";import{g as se,a as le,e as re,f as ie,h as ne,i as ce}from"./coreosStorage-CPXBKsLp.js";import{w as z,V as C,T as M,ac as P,a2 as de,aa as oe,ab as W,ae as I,n as me,af as xe,ag as ue,ah as V}from"./icons-BP9Be9z0.js";import"./vendor-Csw2ODfV.js";import"./utils-BLxLozLB.js";const he=(y,j)=>{const[i,f]=l.useState(y);return l.useEffect(()=>{const n=setTimeout(()=>{f(y)},j);return()=>{clearTimeout(n)}},[y,j]),i},Ce=()=>{const[y,j]=l.useState(!0),[i,f]=l.useState([]),[n,S]=l.useState([]),[L,b]=l.useState(!1),[Y,N]=l.useState(!1),[T,A]=l.useState("tasks"),[m,G]=l.useState("all"),[g,D]=l.useState(null),[R,H]=l.useState(0),[c,v]=l.useState({title:"",timeBlock:"",priority:"medium",category:"general",estimatedDuration:30}),[s,x]=l.useState({name:"",cue:"",routine:"",reward:"",frequency:"daily",timeOfDay:"morning",difficulty:"medium"}),p=he(m,300);l.useEffect(()=>{J()},[]),l.useEffect(()=>{let a;return g&&(a=setInterval(()=>{H(t=>t+1)},1e3)),()=>clearInterval(a)},[g]);const J=async()=>{j(!0);try{const[a,t]=await Promise.all([se(),le()]);f(a),S(t)}catch(a){console.error("Error loading tasks and habits:",a)}finally{j(!1)}},B=l.useMemo(()=>i.filter(a=>p==="completed"?a.completed:p==="pending"?!a.completed:!0),[i,p]),q=l.useMemo(()=>n.filter(a=>p==="completed"?a.completed:p==="pending"?!a.completed:!0),[n,p]),d=l.useMemo(()=>{const a=i.filter(o=>o.completed).length,t=n.filter(o=>o.completed).length;return{tasks:{total:i.length,completed:a,pending:i.length-a,completionRate:i.length>0?Math.round(a/i.length*100):0},habits:{total:n.length,completed:t,pending:n.length-t,completionRate:n.length>0?Math.round(t/n.length*100):0}}},[i,n]),K=async()=>{if(!c.title.trim())return;const a=await ne(c.title,c.timeBlock,c.priority,c.category);a&&(f(t=>[...t,a]),v({title:"",timeBlock:"",priority:"medium",category:"general",estimatedDuration:30}),b(!1))},Q=async a=>{const t=await re(a);t&&f(o=>o.map(k=>k.id===a?t:k))},U=async()=>{if(!s.name.trim()||!s.cue.trim()||!s.routine.trim())return;const a=await ce(s.name,s.cue,s.routine,s.reward,s.frequency);a&&(S(t=>[...t,{...a,completed:!1}]),x({name:"",cue:"",routine:"",reward:"",frequency:"daily",timeOfDay:"morning",difficulty:"medium"}),N(!1))},X=async a=>{const t=await ie(a);t&&S(o=>o.map(k=>k.id===a?{...t,completed:!0}:k))},Z=a=>{D(a),H(0)},_=()=>{D(null),H(0)},F=a=>{const t=Math.floor(a/60),o=a%60;return`${t.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},ee=a=>{switch(a){case"high":return"text-red-600 bg-red-100 dark:bg-red-900/30";case"medium":return"text-orange-600 bg-orange-100 dark:bg-orange-900/30";case"low":return"text-green-600 bg-green-100 dark:bg-green-900/30";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900/30"}},ae=a=>{switch(a){case"easy":return"ðŸŸ¢";case"medium":return"ðŸŸ¡";case"hard":return"ðŸ”´";default:return"âšª"}};return y?e.jsx(te,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Daily Tasks + HabitOS"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your daily tasks and build powerful habits"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(r,{variant:"secondary",onClick:()=>b(!0),children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Add Task"]}),e.jsxs(r,{variant:"primary",onClick:()=>N(!0),children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Add Habit"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(u,{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-3",children:e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(M,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})}),e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[d.tasks.completed,"/",d.tasks.total]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tasks Today"}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${d.tasks.completionRate}%`}})})]}),e.jsxs(u,{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-3",children:e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(C,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})}),e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[d.habits.completed,"/",d.habits.total]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Habits Today"}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${d.habits.completionRate}%`}})})]}),e.jsxs(u,{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-3",children:e.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-full",children:e.jsx(P,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:g?F(R):"00:00"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Timer"})]}),e.jsxs(u,{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-3",children:e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-full",children:e.jsx(de,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})})}),e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:[Math.round((d.tasks.completionRate+d.habits.completionRate)/2),"%"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Overall Score"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(r,{variant:T==="tasks"?"primary":"ghost",size:"small",onClick:()=>A("tasks"),children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Tasks (",d.tasks.total,")"]}),e.jsxs(r,{variant:T==="habits"?"primary":"ghost",size:"small",onClick:()=>A("habits"),children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Habits (",d.habits.total,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-gray-500"}),e.jsxs(w,{value:m,onChange:a=>G(a.target.value),className:"min-w-[120px]",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"completed",children:"Completed"})]})]})]}),T==="tasks"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx($,{children:B.map((a,t)=>e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:t*.05},children:e.jsxs(u,{className:`${a.completed?"opacity-75":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>Q(a.id),className:"flex-shrink-0",disabled:a.completed,children:a.completed?e.jsx(W,{className:"h-6 w-6 text-green-600"}):e.jsx(I,{className:"h-6 w-6 text-gray-400 hover:text-blue-600 transition-colors"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:`font-semibold ${a.completed?"line-through text-gray-500":"text-gray-900 dark:text-gray-100"}`,children:a.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ee(a.priority)}`,children:a.priority})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400",children:[a.timeBlock&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:a.timeBlock})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsxs("span",{children:[a.estimatedDuration,"min"]})]}),a.category&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded-full text-xs",children:a.category})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!a.completed&&e.jsx(r,{variant:"ghost",size:"small",onClick:()=>g===a.id?_():Z(a.id),children:g===a.id?e.jsx(xe,{className:"h-4 w-4"}):e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(r,{variant:"ghost",size:"small",children:e.jsx(V,{className:"h-4 w-4"})})]})]}),g===a.id&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Timer Active"}),e.jsx("span",{className:"text-lg font-mono font-bold text-orange-600",children:F(R)})]})})]})},a.id))}),B.length===0&&e.jsxs(u,{className:"text-center py-12",children:[e.jsx(M,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No tasks found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:m==="all"?"Start by adding your first task!":`No ${m} tasks for today.`}),m==="all"&&e.jsxs(r,{onClick:()=>b(!0),children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Add Your First Task"]})]})]}),T==="habits"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx($,{children:q.map((a,t)=>e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:t*.05},children:e.jsx(u,{className:`${a.completed?"opacity-75":""}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>X(a.id),className:"flex-shrink-0",disabled:a.completed,children:a.completed?e.jsx(W,{className:"h-6 w-6 text-green-600"}):e.jsx(I,{className:"h-6 w-6 text-gray-400 hover:text-green-600 transition-colors"})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:`font-semibold ${a.completed?"line-through text-gray-500":"text-gray-900 dark:text-gray-100"}`,children:a.name}),e.jsxs("span",{className:"text-lg",children:["ðŸ”¥",a.streak]}),e.jsx("span",{className:"text-xs",children:ae(a.difficulty)})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-600 font-medium",children:"Cue:"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:a.cue})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-orange-600 font-medium",children:"Routine:"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:a.routine})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600 font-medium",children:"Reward:"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:a.reward})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[e.jsx("span",{children:a.frequency}),e.jsx("span",{children:a.timeOfDay}),e.jsxs("span",{children:["Best: ",a.longestStreak," days"]})]})]}),e.jsx(r,{variant:"ghost",size:"small",children:e.jsx(V,{className:"h-4 w-4"})})]})})},a.id))}),q.length===0&&e.jsxs(u,{className:"text-center py-12",children:[e.jsx(C,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No habits found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:m==="all"?"Build your first habit using the Cue-Routine-Reward model!":`No ${m} habits for today.`}),m==="all"&&e.jsxs(r,{onClick:()=>N(!0),children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Create Your First Habit"]})]})]}),e.jsx(O,{isOpen:L,onClose:()=>b(!1),title:"Add New Task",size:"medium",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(h,{label:"Task Title",value:c.title,onChange:a=>v(t=>({...t,title:a.target.value})),placeholder:"What do you need to do?",required:!0}),e.jsx(h,{label:"Time Block (Optional)",value:c.timeBlock,onChange:a=>v(t=>({...t,timeBlock:a.target.value})),placeholder:"e.g., 9:00 AM - 10:00 AM"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(w,{label:"Priority",value:c.priority,onChange:a=>v(t=>({...t,priority:a.target.value})),children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]}),e.jsx(h,{label:"Category",value:c.category,onChange:a=>v(t=>({...t,category:a.target.value})),placeholder:"e.g., work, personal"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(r,{variant:"secondary",onClick:()=>b(!1),children:"Cancel"}),e.jsx(r,{onClick:K,disabled:!c.title.trim(),children:"Add Task"})]})]})}),e.jsx(O,{isOpen:Y,onClose:()=>N(!1),title:"Create New Habit",size:"large",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(h,{label:"Habit Name",value:s.name,onChange:a=>x(t=>({...t,name:a.target.value})),placeholder:"What habit do you want to build?",required:!0}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-3",children:"Cue-Routine-Reward Model"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(h,{label:"Cue (Trigger)",value:s.cue,onChange:a=>x(t=>({...t,cue:a.target.value})),placeholder:"What triggers this habit? (e.g., after I wake up)",required:!0}),e.jsx(h,{label:"Routine (The Habit)",value:s.routine,onChange:a=>x(t=>({...t,routine:a.target.value})),placeholder:"What exactly will you do? (e.g., drink a glass of water)",required:!0}),e.jsx(h,{label:"Reward (Benefit)",value:s.reward,onChange:a=>x(t=>({...t,reward:a.target.value})),placeholder:"What's your reward? (e.g., feel energized for the day)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(w,{label:"Frequency",value:s.frequency,onChange:a=>x(t=>({...t,frequency:a.target.value})),children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]}),e.jsxs(w,{label:"Time of Day",value:s.timeOfDay,onChange:a=>x(t=>({...t,timeOfDay:a.target.value})),children:[e.jsx("option",{value:"morning",children:"Morning"}),e.jsx("option",{value:"afternoon",children:"Afternoon"}),e.jsx("option",{value:"evening",children:"Evening"}),e.jsx("option",{value:"anytime",children:"Anytime"})]})]}),e.jsxs(w,{label:"Difficulty",value:s.difficulty,onChange:a=>x(t=>({...t,difficulty:a.target.value})),children:[e.jsx("option",{value:"easy",children:"Easy ðŸŸ¢"}),e.jsx("option",{value:"medium",children:"Medium ðŸŸ¡"}),e.jsx("option",{value:"hard",children:"Hard ðŸ”´"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(r,{variant:"secondary",onClick:()=>N(!1),children:"Cancel"}),e.jsx(r,{onClick:U,disabled:!s.name.trim()||!s.cue.trim()||!s.routine.trim(),children:"Create Habit"})]})]})})]})};export{Ce as default};
