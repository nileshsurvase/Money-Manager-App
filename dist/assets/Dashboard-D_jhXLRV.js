import{j as e,m as l}from"./ui-CeF3mqTb.js";import{r as a}from"./router-x15TIwzH.js";import{C as o}from"./Card-BuWKqhYc.js";import{u as Z,g as _,a as ee,b as te,B as F}from"./index-DbxcNNxi.js";import{E as se}from"./ExpenseModal-D99IiP9x.js";import{g as ae,a as re,f as $,b as B,c as ne,d as f,e as le,h as ie,i as j,j as oe}from"./dateHelpers-75khiGh5.js";import{a as de,t as ce,u as xe,h as me,v as ge,i as he,E as ue,w as P}from"./icons-BP9Be9z0.js";import{R as z,C as pe,T as Y}from"./generateCategoricalChart-DLticPBC.js";import{P as ye,a as fe}from"./PieChart-TBdxlQXX.js";import{L as je,a as be}from"./LineChart-0pgzfNF8.js";import{C as Ne,X as ve,Y as we}from"./YAxis-DqBHu9IX.js";import"./vendor-Csw2ODfV.js";import"./utils-BLxLozLB.js";import"./Select-BqqbDTNT.js";import"./Input-3yWY-vqC.js";const ke=a.memo(()=>{let r,b;try{const t=Z();r=t.formatCurrency,b=t.formatAbbreviatedAmount}catch(t){console.warn("Currency context not available, using fallback:",t),r=s=>`₹${s}`,b=s=>`₹${s}`}const[d,O]=a.useState([]),[N,G]=a.useState([]),[v,U]=a.useState([]),[W,w]=a.useState(!1),[p,I]=a.useState("month"),[m,k]=a.useState(0),[K,E]=a.useState(!0),[g,X]=a.useState(!1),C=a.useCallback(async()=>{E(!0);try{const[t,s,n]=await Promise.all([_(),ee(),te()]);O(t),G(s),U(n)}catch(t){console.error("Error loading data:",t)}finally{E(!1)}},[]);a.useEffect(()=>{C()},[C]);const A=a.useMemo(()=>{const t=new Date,s=new Date(t.getFullYear(),t.getMonth()+m,1);return ae(s.getFullYear(),s.getMonth())},[m]),H=a.useMemo(()=>{const t=new Date,s=new Date(t.getFullYear(),t.getMonth()+m,1);return re(s)},[m]),V=a.useCallback(()=>{k(t=>t-1)},[]),q=a.useCallback(()=>{k(t=>t+1)},[]),L=a.useCallback(t=>{I(t),k(0)},[]),i=a.useMemo(()=>{if(m!==0){const{start:t,end:s}=A;return $(d,t,s)}if(p==="lastMonth"){const{start:t,end:s}=B();return $(d,t,s)}else return ne(d)},[d,p,m,A]),J=a.useMemo(()=>{const{start:t,end:s}=B();return d.filter(n=>{const c=new Date(n.date);return c>=t&&c<=s})},[d]),x=f(i),y=f(J),h=y>0?(x-y)/y*100:0,M=a.useMemo(()=>{const t=le(i);return v.map(s=>{const n=f(t[s.id]||[]),c=N.find(Q=>Q.categoryId===s.id);return{...s,spent:n,budget:c?.amount||0,percentage:c?.amount?n/c.amount*100:0}}).filter(s=>s.spent>0||s.budget>0)},[i,v,N]),D=M.map(t=>({name:t.name,value:t.spent,color:t.color})),T=a.useMemo(()=>{const t=ie(d);return Object.keys(t).sort().slice(-6).map(s=>({month:new Date(s+"-01").toLocaleDateString("en-US",{month:"short"}),amount:f(t[s])}))},[d]),R=a.useMemo(()=>{const t=g?i.length:5;return i.sort((s,n)=>new Date(n.date)-new Date(s.date)).slice(0,t)},[i,g]),S=N.reduce((t,s)=>t+s.amount,0),u=S>0?x/S*100:0;return K?e.jsx("div",{className:"min-h-screen flex items-center justify-center padding-responsive",children:e.jsxs("div",{className:"text-center spacing-md",children:[e.jsx("div",{className:"spinner-large mx-auto"}),e.jsx("h2",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Loading Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Getting your financial overview ready..."})]})}):e.jsxs("div",{className:"spacing-lg",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500/5 to-red-500/5 rounded-2xl sm:rounded-3xl blur-xl"}),e.jsx(o,{variant:"glass",className:"relative",children:e.jsxs("div",{className:"flex flex-col space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h1",{className:"text-gradient flex items-center gap-2 sm:gap-3",children:[e.jsx(de,{className:"h-6 w-6 sm:h-8 sm:w-8 text-orange-500 animate-pulse"}),"Financial Dashboard"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm sm:text-base lg:text-lg",children:"Your comprehensive financial overview"})]}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex rounded-xl border border-gray-200/50 dark:border-gray-700/50 bg-white/50 dark:bg-gray-800/50 backdrop-blur-md p-1",children:[e.jsx("button",{onClick:()=>L("lastMonth"),className:`flex-1 px-3 py-2 text-sm font-semibold rounded-lg transition-all duration-300 touch-target ${p==="lastMonth"?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg":"text-gray-700 dark:text-gray-300 hover:bg-white/50 dark:hover:bg-gray-700/50"}`,children:"Last Month"}),e.jsx("button",{onClick:()=>L("month"),className:`flex-1 px-3 py-2 text-sm font-semibold rounded-lg transition-all duration-300 touch-target ${p==="month"?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg":"text-gray-700 dark:text-gray-300 hover:bg-white/50 dark:hover:bg-gray-700/50"}`,children:"This Month"})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6",children:[e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(o,{variant:"stat",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:V,className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300 touch-target",children:e.jsx(ce,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{className:"space-y-1 sm:space-y-2 flex-1 text-center px-2",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400",children:H}),e.jsx("p",{className:"currency-large font-bold text-lg sm:text-xl",children:j(x,r(0).charAt(0))}),x>=1e3&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:r(x)})]}),e.jsx("button",{onClick:q,className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-300 touch-target",children:e.jsx(xe,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})})]})})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(o,{variant:"stat",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1 sm:space-y-2 min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 truncate",children:"vs Last Month"}),e.jsxs("p",{className:`text-xl sm:text-2xl lg:text-3xl font-bold truncate ${h>=0?"text-red-500":"text-green-500"}`,children:[h>=0?"+":"",h.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 truncate break-all",children:j(Math.abs(x-y),r(0).charAt(0))})]}),e.jsx("div",{className:`w-12 h-12 sm:w-16 sm:h-16 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg ${h>=0?"bg-gradient-to-br from-red-400 to-red-600":"bg-gradient-to-br from-green-400 to-green-600"}`,children:h>=0?e.jsx(me,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"}):e.jsx(ge,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})})]})})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(o,{variant:"stat",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1 sm:space-y-2 min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 truncate",children:"Avg Daily Spend"}),e.jsx("p",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-gray-100 truncate break-all",children:j(i.length>0?x/i.length:0,r(0).charAt(0))}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 truncate",children:[i.length," Transactions"]})]}),e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(he,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})})]})})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(o,{variant:"stat",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1 sm:space-y-2 min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 truncate",children:"Budget Used"}),e.jsxs("p",{className:`text-xl sm:text-2xl lg:text-3xl font-bold truncate ${u>100?"text-red-500":u>80?"text-yellow-500":"text-green-500"}`,children:[u.toFixed(1),"%"]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 truncate break-all",children:["of ",j(S,r(0).charAt(0))]})]}),e.jsx("div",{className:`w-12 h-12 sm:w-16 sm:h-16 rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg ${u>100?"bg-gradient-to-br from-red-400 to-red-600":u>80?"bg-gradient-to-br from-yellow-400 to-yellow-600":"bg-gradient-to-br from-green-400 to-green-600"}`,children:e.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs sm:text-sm font-bold",children:"%"})})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8",children:[e.jsx(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:e.jsxs(o,{variant:"default",className:"chart-container",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100 mb-4 sm:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 sm:w-2 h-4 sm:h-6 bg-gradient-to-b from-orange-500 to-red-500 rounded-full"}),"Expenses by Category"]}),D.length>0?e.jsx("div",{className:"h-64 sm:h-80",children:e.jsx(z,{width:"100%",height:"100%",children:e.jsxs(ye,{children:[e.jsx(fe,{data:D,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:3,dataKey:"value",children:D.map((t,s)=>e.jsx(pe,{fill:t.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:2},`cell-${s}`))}),e.jsx(Y,{formatter:t=>[r(t),"Amount"],contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",fontSize:"14px"}})]})})}):e.jsxs("div",{className:"h-64 sm:h-80 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 spacing-sm",children:[e.jsx("div",{className:"text-4xl sm:text-6xl mb-2 sm:mb-4",children:"📊"}),e.jsx("p",{className:"font-medium text-center",children:"No expenses to display"}),e.jsx("p",{className:"text-sm text-center",children:"Add some expenses to see the breakdown"})]})]})}),e.jsx(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6},children:e.jsxs(o,{variant:"default",className:"chart-container",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100 mb-4 sm:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 sm:w-2 h-4 sm:h-6 bg-gradient-to-b from-green-500 to-orange-500 rounded-full"}),"Monthly Trends"]}),T.length>0?e.jsx("div",{className:"h-64 sm:h-80",children:e.jsx(z,{width:"100%",height:"100%",children:e.jsxs(je,{data:T,children:[e.jsx(Ne,{strokeDasharray:"3 3",stroke:"rgba(156, 163, 175, 0.2)"}),e.jsx(ve,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fill:"#6b7280",fontSize:12}}),e.jsx(we,{axisLine:!1,tickLine:!1,tick:{fill:"#6b7280",fontSize:12},tickFormatter:t=>b(t)}),e.jsx(Y,{formatter:t=>[r(t),"Amount"],contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",fontSize:"14px"},cursor:{fill:"rgba(0, 0, 0, 0.1)"}}),e.jsx(be,{type:"monotone",dataKey:"amount",stroke:"url(#colorGradient)",strokeWidth:3,dot:{fill:"#f97316",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#f97316",strokeWidth:2,fill:"#fff"}}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"1",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"#f97316"}),e.jsx("stop",{offset:"100%",stopColor:"#22c55e"})]})})]})})}):e.jsxs("div",{className:"h-64 sm:h-80 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 spacing-sm",children:[e.jsx("div",{className:"text-4xl sm:text-6xl mb-2 sm:mb-4",children:"📈"}),e.jsx("p",{className:"font-medium text-center",children:"No data available"}),e.jsx("p",{className:"text-sm text-center",children:"Start adding expenses to see trends"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8",children:[e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:e.jsxs(o,{children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100 mb-4 sm:mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 sm:w-2 h-4 sm:h-6 bg-gradient-to-b from-orange-500 to-red-500 rounded-full"}),"Budget Progress"]}),e.jsxs("div",{className:"spacing-sm",children:[M.map((t,s)=>e.jsxs(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+s*.1},className:"spacing-xs",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-lg sm:rounded-xl flex items-center justify-center text-white text-sm sm:text-lg shadow-lg flex-shrink-0",style:{backgroundColor:t.color},children:t.icon}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm sm:text-base truncate",children:t.name}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate",children:[r(t.spent)," of ",r(t.budget)]})]})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsxs("span",{className:`text-sm sm:text-lg font-bold ${t.percentage>100?"text-red-500":t.percentage>80?"text-yellow-500":"text-green-500"}`,children:[t.percentage.toFixed(1),"%"]})})]}),e.jsx("div",{className:"relative w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 sm:h-3",children:e.jsx(l.div,{initial:{width:0},animate:{width:`${Math.min(t.percentage,100)}%`},transition:{duration:1,delay:.8+s*.1},className:`h-2 sm:h-3 rounded-full relative overflow-hidden ${t.percentage>100?"bg-red-500":t.percentage>80?"bg-yellow-500":"bg-gradient-to-r from-orange-500 to-red-500"}`,children:e.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})})]},t.id)),M.length===0&&e.jsxs("div",{className:"text-center py-6 sm:py-8 spacing-sm",children:[e.jsx("div",{className:"text-4xl sm:text-6xl",children:"🎯"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"No budgets set yet"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Create your first budget to track spending"})]})]})]})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:e.jsxs(o,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6 gap-3",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:"w-1 sm:w-2 h-4 sm:h-6 bg-gradient-to-b from-green-500 to-orange-500 rounded-full flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Recent Expenses"})]}),i.length>5&&e.jsxs(F,{variant:"secondary",size:"small",className:"flex-shrink-0",onClick:()=>X(!g),children:[e.jsx(ue,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:g?"Show Less":"View All"}),e.jsx("span",{className:"sm:hidden",children:g?"Less":"All"})]})]}),e.jsxs("div",{className:"spacing-xs",children:[R.map((t,s)=>{const n=v.find(c=>c.id===t.categoryId);return e.jsxs(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9+s*.1},className:"flex items-center justify-between p-3 sm:p-4 rounded-lg sm:rounded-xl bg-gradient-to-r from-gray-50/50 to-gray-100/50 dark:from-gray-700/50 dark:to-gray-800/50 backdrop-blur-sm border border-gray-200/50 dark:border-gray-700/50 hover:shadow-lg transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-lg sm:rounded-xl flex items-center justify-center text-white text-sm sm:text-lg shadow-lg flex-shrink-0",style:{backgroundColor:n?.color||"#6b7280"},children:n?.icon||"📝"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100 text-sm sm:text-base truncate",children:t.description}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 truncate",children:[oe(t.date)," • ",n?.name]})]})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsx("span",{className:"currency-medium",children:r(t.amount)})})]},t.id)}),R.length===0&&e.jsxs("div",{className:"text-center py-6 sm:py-8 spacing-sm",children:[e.jsx("div",{className:"text-4xl sm:text-6xl",children:"📝"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"No recent expenses"}),e.jsxs(F,{onClick:()=>w(!0),variant:"primary",className:"mt-4",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Add Your First Expense"]})]})]})]})})]}),e.jsx(l.button,{onClick:()=>w(!0),className:"fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-orange-500 to-red-500 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 z-50 flex items-center justify-center",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(P,{className:"h-6 w-6 text-white"})}),e.jsx(se,{isOpen:W,onClose:()=>w(!1),onSuccess:C})]})});ke.displayName="Dashboard";export{ke as default};
