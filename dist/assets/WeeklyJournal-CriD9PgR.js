import{j as e,m as s,A as V}from"./ui-CeF3mqTb.js";import{r as o}from"./router-x15TIwzH.js";import{C as n}from"./Card-BuWKqhYc.js";import{B as x}from"./index-DCndX48W.js";import{m as X,n as Y,o as Z,p as _,u as ee,q as ae,k as te}from"./diaryStorage-D7FW-Xfd.js";import{u as se,B as D,j as F,v as re,$ as k,i as ie,T as R,a4 as ne,a5 as le,a7 as oe,a8 as de,h as ce,N as ge,t as xe,a6 as he,C as ye}from"./icons-Dv2osvF6.js";import{h as u,j as E,f as l}from"./utils-D8kRLn_f.js";import"./vendor-Csw2ODfV.js";const ke=()=>{const[i,y]=o.useState(null),[N,m]=o.useState(!1),[p,f]=o.useState(!1),[g,G]=o.useState(new Date),[M,z]=o.useState([]),[A,$]=o.useState(new Set),[B,v]=o.useState(!1),[h,w]=o.useState(null),[r,b]=o.useState({biggestWin:"",biggestChallenge:"",personalGrowth:"",behaviorPatterns:"",relationships:"",goalsProgress:"",nextWeekDifferently:"",lookingForward:"",additionalReflections:""}),j=u(g),C=E(g);o.useEffect(()=>{T(),W()},[g]);const T=()=>{const a=X("weekly",g);a?(y(a),b({biggestWin:a.biggestWin||"",biggestChallenge:a.biggestChallenge||"",personalGrowth:a.personalGrowth||"",behaviorPatterns:a.behaviorPatterns||"",relationships:a.relationships||"",goalsProgress:a.goalsProgress||"",nextWeekDifferently:a.nextWeekDifferently||"",lookingForward:a.lookingForward||"",additionalReflections:a.additionalReflections||""}),m(!1)):(y(null),b({biggestWin:"",biggestChallenge:"",personalGrowth:"",behaviorPatterns:"",relationships:"",goalsProgress:"",nextWeekDifferently:"",lookingForward:"",additionalReflections:""}),m(!0))},W=()=>{const a=Y("weekly",g,10);z(a)},P=a=>{const t=_(g,"weekly",a);G(t)},H=async()=>{f(!0);try{const a={...r,content:O(r),date:g.toISOString()};if(i){const t=ee(i.id,"weekly",a);y(t)}else{const t=ae("weekly",a);y(t)}m(!1),W()}catch(a){console.error("Error saving entry:",a)}finally{f(!1)}},L=async()=>{const a=h||i;if(a){f(!0);try{te(a.id,"weekly"),(!h||h.id===i?.id)&&(y(null),m(!0),b({biggestWin:"",biggestChallenge:"",personalGrowth:"",behaviorPatterns:"",relationships:"",goalsProgress:"",nextWeekDifferently:"",lookingForward:"",additionalReflections:""})),v(!1),w(null),W()}catch(t){console.error("Error deleting entry:",t)}finally{f(!1)}}},O=a=>`
Weekly Reflection - ${l(j,"MMM dd")} to ${l(C,"MMM dd, yyyy")}

🏆 Biggest Win: ${a.biggestWin}

💪 Biggest Challenge: ${a.biggestChallenge}

🌱 Personal Growth: ${a.personalGrowth}

🔄 Behavior Patterns: ${a.behaviorPatterns}

❤️ Relationships: ${a.relationships}

🎯 Goals Progress: ${a.goalsProgress}

🔄 Next Week Differently: ${a.nextWeekDifferently}

🌟 Looking Forward: ${a.lookingForward}

💭 Additional Reflections: ${a.additionalReflections}
    `.trim(),d=(a,t)=>{b(c=>({...c,[a]:t}))},U=()=>r.biggestWin&&r.biggestChallenge&&r.personalGrowth,J=a=>{$(t=>{const c=new Set(t);return c.has(a)?c.delete(a):c.add(a),c})},q=()=>{const t=u(new Date);return j.toDateString()===t.toDateString()},I=()=>{const t=u(new Date);return j>t};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/5 to-teal-500/5 rounded-2xl sm:rounded-3xl blur-xl"}),e.jsxs(n,{variant:"glass",className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(x,{variant:"secondary",size:"sm",onClick:()=>P("prev"),className:"flex items-center space-x-2",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Previous"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h1",{className:"text-gradient flex items-center justify-center gap-2 bg-gradient-to-r from-green-600 to-teal-600 dark:from-green-400 dark:to-teal-400 bg-clip-text text-transparent",children:[e.jsx(D,{className:"h-6 w-6 text-green-500"}),"Weekly Journal"]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600 dark:text-gray-400 mt-1",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsxs("span",{className:"text-sm font-medium",children:[l(j,"MMM dd")," - ",l(C,"MMM dd, yyyy")]}),q()&&e.jsx("span",{className:"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-2 py-1 rounded-full text-xs font-medium",children:"This Week"})]})]}),e.jsxs(x,{variant:"secondary",size:"sm",onClick:()=>P("next"),className:"flex items-center space-x-2",disabled:I(),children:[e.jsx("span",{className:"hidden sm:inline",children:"Next"}),e.jsx(re,{className:"h-4 w-4"})]})]}),e.jsx("div",{className:"flex justify-center space-x-3 mt-4",children:!N&&i&&e.jsxs(e.Fragment,{children:[e.jsxs(x,{variant:"secondary",onClick:()=>m(!0),children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Edit Entry"]}),e.jsxs(x,{variant:"danger",onClick:()=>{w(i),v(!0)},className:"bg-red-500 hover:bg-red-600 text-white",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Delete Entry"]})]})})]})]}),N?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{className:"h-5 w-5 text-green-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Biggest Win This Week"})]}),e.jsx("textarea",{value:r.biggestWin,onChange:a=>d("biggestWin",a.target.value),placeholder:"What accomplishment or positive experience stood out this week?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-5 w-5 text-red-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Biggest Challenge This Week"})]}),e.jsx("textarea",{value:r.biggestChallenge,onChange:a=>d("biggestChallenge",a.target.value),placeholder:"What was the most difficult or demanding situation you faced?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{className:"h-5 w-5 text-yellow-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Personal Growth"})]}),e.jsx("textarea",{value:r.personalGrowth,onChange:a=>d("personalGrowth",a.target.value),placeholder:"How did you grow or learn about yourself this week?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:"h-5 w-5 text-orange-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Behavior Patterns"})]}),e.jsx("textarea",{value:r.behaviorPatterns,onChange:a=>d("behaviorPatterns",a.target.value),placeholder:"What patterns did you notice in your thoughts, emotions, or actions?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"h-5 w-5 text-purple-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Relationships"})]}),e.jsx("textarea",{value:r.relationships,onChange:a=>d("relationships",a.target.value),placeholder:"How were your relationships this week? Any meaningful connections or challenges?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-5 w-5 text-blue-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Goals Progress"})]}),e.jsx("textarea",{value:r.goalsProgress,onChange:a=>d("goalsProgress",a.target.value),placeholder:"What progress did you make on your goals this week?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{className:"h-5 w-5 text-indigo-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Next Week Differently"})]}),e.jsx("textarea",{value:r.nextWeekDifferently,onChange:a=>d("nextWeekDifferently",a.target.value),placeholder:"What would you do differently if you could repeat this week?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"h-5 w-5 text-pink-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Looking Forward"})]}),e.jsx("textarea",{value:r.lookingForward,onChange:a=>d("lookingForward",a.target.value),placeholder:"What are you most excited about or looking forward to next week?",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:4})]})})})]}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},children:e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"h-5 w-5 text-teal-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Additional Reflections"})]}),e.jsx("textarea",{value:r.additionalReflections,onChange:a=>d("additionalReflections",a.target.value),placeholder:"Any other thoughts, insights, or reflections from this week...",className:"w-full p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none",rows:5})]})})}),N&&e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"flex justify-center pt-6",children:e.jsxs(x,{variant:"primary",onClick:H,disabled:p||!U(),className:"px-8 py-3 text-lg",children:[e.jsx(ge,{className:"h-5 w-5 mr-2"}),p?"Saving...":"Save Entry"]})})]}):i&&e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(n,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-gray-900 dark:text-gray-100 leading-relaxed",children:i.content})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{className:"h-5 w-5 text-green-500"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Weekly reflection completed on ",l(new Date(i.createdAt),"MMM dd, yyyy")]})]}),i.updatedAt!==i.createdAt&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Last updated: ",l(new Date(i.updatedAt),"MMM dd, HH:mm")]})]})]})})}),M.length>0&&e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(n,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center space-x-2",children:[e.jsx(F,{className:"h-5 w-5 text-green-500"}),e.jsx("span",{children:"Previous Weekly Reflections"})]}),e.jsx("div",{className:"space-y-3",children:M.map(a=>{const t=Z(a),c=A.has(a.id),K=u(new Date(a.date)),Q=E(new Date(a.date));return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg group",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>J(a.id),className:"flex-1 p-4 text-left hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-lg",children:"📓"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:["Week of ",l(K,"MMM dd")," - ",l(Q,"MMM dd, yyyy")]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.preview})]})]}),c?e.jsx(he,{className:"h-5 w-5 text-gray-400"}):e.jsx(ye,{className:"h-5 w-5 text-gray-400"})]})}),e.jsx("button",{onClick:S=>{S.preventDefault(),S.stopPropagation(),w(a),v(!0)},className:"opacity-0 group-hover:opacity-100 transition-opacity p-2 mr-2 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/20 text-red-500 hover:text-red-600",title:"Delete entry",children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx(V,{children:c&&e.jsx(s.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"p-4 prose dark:prose-invert prose-sm max-w-none",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-gray-900 dark:text-gray-100 leading-relaxed",children:a.content})})})})]},a.id)})})]})})}),B&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsx(s.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full mx-4 shadow-xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20 mb-4",children:e.jsx(k,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Delete Weekly Entry"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Are you sure you want to delete this weekly journal entry for the week of ",h?l(u(new Date(h.date)),"MMM dd")+" - "+l(E(new Date(h.date)),"MMM dd, yyyy"):l(j,"MMM dd")+" - "+l(C,"MMM dd, yyyy"),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(x,{variant:"secondary",onClick:()=>{v(!1),w(null)},className:"flex-1",disabled:p,children:"Cancel"}),e.jsx(x,{variant:"danger",onClick:L,className:"flex-1 bg-red-500 hover:bg-red-600 text-white",disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Delete Entry"]})})]})]})})})]})};export{ke as default};
